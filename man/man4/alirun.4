.TH alirun 4 "" "ALICE Reference Manual"
.ad b
.SH NAME
alirun - a shell script to run AliRoot
.SH DESCRIPTION
$Log$
Revision 1.1  2001/05/16 14:57:29  alibrary
New files for folders and Stack


Revision 1.5  2001/02/23 17:33:40  buncic
Added alifs wrapper for CASTOR and alirun modified accordingly.

Revision 1.4  2001/02/08 18:55:43  buncic
Support for writing to remote file systems (shift/castor).

Revision 1.3  2001/02/01 18:00:23  buncic
Use bash in place of sh for compatibility

Revision 1.2  2001/02/01 17:46:26  buncic
Fixed mktemp on HP and Sun

Revision 1.1  2001/01/26 21:22:02  hristov
Major upgrade of AliRoot code


.SH SYNOPSIS
alirun [[-d <TPC+ITS+..>|-all]]
        [-f <hits file>]
        [-o <output directory>]
        [-split]
        [-C <Config.C>]
        [-p <particle#>]
        [-seed <seed for random number generator>]
        [-n <event #>]
        <-c <command ...>>

.SH DESCRIPTION
This script is a wrapper for AliRoot and provides a command line interface suitable for running in batch mode.

.SH CONFIGURATION OPTIONS
The following options are used to configure AliRoot session.

-c <command1 command2 ...>
   This option must be the last one on alirun command line and specifies the sequence of alirun commands to be executed. At present, the following commands are supported:

    - Hits ................ simulation 
    - Digits .............. digitisation
    - SDigits ............. creation of sumable digits
    - SDigits2Digits ...... conversion SDigits->Digits 
    - Reco ................ reconstruction

-d <TPC+ITS+..> | -d all | -all 
   Selects detector for which <command> will be run. If none of these options was specified, an internal loop in AliRoot over all active detectors is assumed.  Otherwise, for each detector, input file(s) are re-opened in update mode, command (or macro) is executed and the file is closed. Option -all is equivalent to MUON+HMPID+TOF+ITS+TPC+PHOS+PMD+CASTOR+TRD. Detectors are processed in order as they appear on the command line.   

-f <file>
   Name of the top level Root file where Root trees will be stored (branches may reside in the same file or be diverted to separate files (see -split option). By default, file is named galice.root.

-o <directory> 
   A directory where output file(s) will be stored. If does not exist, it will be created. If not specified, current directory is used. One can prefix the directory name with a string indicting file transport protocols (as supported by ROOT). In addition, some file transport protocols are selected by name signatures. At present the following methods are available:

 o) if file name begins with rfio:, shift:, castor:, hpss:, /shift, /castor, /hpss => rfio (remote file i/o) protocol (requires rfiod on server side)
 o) if file name begins with root:, roots: =>  root and secure root protocol (requires rootd on server side)
 o) if file name begins with http: => HTTP protocol (requires modified apache server on server side)

-split
   If specified, this option will tell AliRoot to divert branches of Root trees into separate files.

   The layout of output directory is the following:
   
   <directory>
    |-- Digits.<detector>.root
    |-- SDigits.<detector>.root
    |-- Hits.root
    |-- Kine.root
    |-- Reco.root
    `-- galice.root

-C <macro.C>
   An alternative to Config.C macro which contains AliRoot configuration. 

-p <n> 
   Number of primary particles to be generated by selected event generator. Required for Hits command, Ignored by Digits command (digitisation is performed for all particles found in input file). Default value is 50. 
  
-seed <n> 
   Seed for random number generator (used to initialise TRandom3(n)).  
  
-n <n>
   Number of events to generate (not yet implemented).  

.SH RUN OPTIONS
These options define run time appearance of the AliRoot session.

-help
   Display usage.

-verbose
   Switch verbose screen output on. 

-quiet
   Switch verbose output off. Output is redirected to a file which is shown on standard output only if <command> returns non zero status.

-fork
   Forks all digitisation processes in background, using LSF if available, in order to speed up execution. It cannot be used in present design where only tree branches are diverted to separate files as top level Root file must be kept open in update mode.

-trace
   Show trace of execution of shell commands.
  
-debug
   Execute AliRoot under gdb. 

-debugger <command_name>
   Execute AliRoot under debugger other than gdb. 

-debuglevel <level>
   Set AliRoot debug flag to <level>.

-break <breakpoint>
   Execute AliRoot under gdb and set <breakpoint>.

-makeman
   Create man page for alirun. 
  
.SH EXAMPLES
   Run sumulation for 1 event, 100 particles and store output in file galice.root in /tmp/event.1 directory:

   alirun -o /tmp/event.1 -p 100 -c Hits

   Run sumulation for 1 event, 100 particles and store output in file test.root in /tmp/event.2 directory. In adition, divert branches of TreeD,TreeR and TreeK into separate files:
   
   alirun -o /tmp/event.2 -f test.root -split -p 100 -c Hits

  Use output from first step and create TOF and HMPID digits. Output is in the same direcory and in file test.root

   alirun -d TOF+HMPID -o /tmp/event.1 -c Digits

  Use output from second step and create digits for all detectors. Output is in the same direcory and branches are diverted to separate files:

   alirun -d all -o /tmp/event.2 -f test.root -split -c Digits

.SH AUTHOR
   Predrag Buncic, e-mail: Predrag.Buncic@cern.ch 

.SH CREATION DATE
   06-Nov-2000

