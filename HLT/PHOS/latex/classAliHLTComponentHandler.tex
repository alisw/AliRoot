\section{Ali\-HLTComponent\-Handler Class Reference}
\label{classAliHLTComponentHandler}\index{AliHLTComponentHandler@{AliHLTComponentHandler}}
{\tt \#include $<$Ali\-HLTComponent\-Handler.h$>$}

Inheritance diagram for Ali\-HLTComponent\-Handler::\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2cm]{classAliHLTComponentHandler}
\end{center}
\end{figure}


\subsection{Detailed Description}
The component handler controls all the processing components available in the system. It also controls the component shared libraries. 



Definition at line 32 of file Ali\-HLTComponent\-Handler.h.\subsection*{Public Member Functions}
\begin{CompactItemize}
\item 
{\bf Ali\-HLTComponent\-Handler} ()
\item 
{\bf Ali\-HLTComponent\-Handler} ({\bf Ali\-HLTComponent\-Environment} $\ast$p\-Env)
\item 
{\bf Ali\-HLTComponent\-Handler} (const {\bf Ali\-HLTComponent\-Handler} \&)
\item 
{\bf Ali\-HLTComponent\-Handler} \& {\bf operator=} (const {\bf Ali\-HLTComponent\-Handler} \&)
\item 
virtual {\bf $\sim$Ali\-HLTComponent\-Handler} ()
\item 
void {\bf Set\-Environment} ({\bf Ali\-HLTComponent\-Environment} $\ast$p\-Env)
\item 
int {\bf Load\-Library} (const char $\ast$library\-Path)
\item 
void $\ast$ {\bf Find\-Symbol} (const char $\ast$library, const char $\ast$symbol)
\item 
int {\bf Unload\-Library} (const char $\ast$library\-Path)
\item 
int {\bf Schedule\-Register} ({\bf Ali\-HLTComponent} $\ast$p\-Sample)
\item 
int {\bf Register\-Component} ({\bf Ali\-HLTComponent} $\ast$p\-Sample)
\item 
int {\bf Register\-Scheduled\-Components} ()
\item 
int {\bf Deregister\-Component} (const char $\ast$component\-ID)
\item 
int {\bf Add\-Standard\-Components} ()
\item 
int {\bf Delete\-Standard\-Components} ()
\item 
int {\bf Create\-Component} (const char $\ast$component\-ID, void $\ast$p\-Env\-Param, int argc, const char $\ast$$\ast$argv, {\bf Ali\-HLTComponent} $\ast$\&component)
\item 
int {\bf Create\-Component} (const char $\ast$component\-ID, void $\ast$p\-Env\-Param, {\bf Ali\-HLTComponent} $\ast$\&component)
\item 
void {\bf List} ()
\item 
int {\bf Announce\-Version} ()
\end{CompactItemize}
\subsection*{Private Member Functions}
\begin{CompactItemize}
\item 
int {\bf Find\-Component\-Index} (const char $\ast$component\-ID)
\item 
{\bf Ali\-HLTComponent} $\ast$ {\bf Find\-Component} (const char $\ast$component\-ID)
\item 
int {\bf Insert\-Component} ({\bf Ali\-HLTComponent} $\ast$p\-Sample)
\item 
int {\bf Unload\-Libraries} ()
\item 
{\bf Ali\-HLTLib\-Handle} $\ast$ {\bf Find\-Library} (const char $\ast$library)
\item 
int {\bf Unload\-Library} ({\bf Ali\-HLTComponent\-Handler::Ali\-HLTLib\-Handle} \&handle)
\item 
{\bf Class\-Def} ({\bf Ali\-HLTComponent\-Handler}, 0)
\end{CompactItemize}
\subsection*{Private Attributes}
\begin{CompactItemize}
\item 
vector$<$ {\bf Ali\-HLTComponent} $\ast$ $>$ {\bf f\-Component\-List}
\item 
vector$<$ {\bf Ali\-HLTComponent} $\ast$ $>$ {\bf f\-Schedule\-List}
\item 
vector$<$ {\bf Ali\-HLTLib\-Handle} $>$ {\bf f\-Library\-List}
\item 
{\bf Ali\-HLTComponent\-Environment} {\bf f\-Environment}
\item 
vector$<$ {\bf Ali\-HLTComponent} $\ast$ $>$ {\bf f\-Standard\-List}
\end{CompactItemize}


\subsection{Constructor \& Destructor Documentation}
\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!AliHLTComponentHandler@{AliHLTComponentHandler}}
\index{AliHLTComponentHandler@{AliHLTComponentHandler}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}Ali\-HLTComponent\-Handler::Ali\-HLTComponent\-Handler ()}\label{classAliHLTComponentHandler_a0}


standard constructor \index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!AliHLTComponentHandler@{AliHLTComponentHandler}}
\index{AliHLTComponentHandler@{AliHLTComponentHandler}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}Ali\-HLTComponent\-Handler::Ali\-HLTComponent\-Handler ({\bf Ali\-HLTComponent\-Environment} $\ast$ {\em p\-Env})}\label{classAliHLTComponentHandler_a1}


constructor 

Definition at line 67 of file Ali\-HLTComponent\-Handler.cxx.

References Add\-Standard\-Components(), f\-Environment, Ali\-HLTComponent\-Environment::f\-Logging\-Func, and Ali\-HLTLogging::Init().

\footnotesize\begin{verbatim}68   :
69   fComponentList(),
70   fScheduleList(),
71   fLibraryList(),
72   fEnvironment(),
73   fStandardList()
74 {
75   // see header file for class documentation
76   if (pEnv) {
77     memcpy(&fEnvironment, pEnv, sizeof(AliHLTComponentEnvironment));
78     if (pEnv->fLoggingFunc) {
79       // the AliHLTLogging::Init method also sets the stream output
80       // and notification handler to AliLog. This should only be done
81       // if the logging environment contains a logging function
82       // for redirection
83       AliHLTLogging::Init(pEnv->fLoggingFunc);
84     }
85   }  else
86     memset(&fEnvironment, 0, sizeof(AliHLTComponentEnvironment));
87   AddStandardComponents();
88 }

\end{verbatim}\normalsize 


\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!AliHLTComponentHandler@{AliHLTComponentHandler}}
\index{AliHLTComponentHandler@{AliHLTComponentHandler}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}Ali\-HLTComponent\-Handler::Ali\-HLTComponent\-Handler (const {\bf Ali\-HLTComponent\-Handler} \&)}\label{classAliHLTComponentHandler_a2}


not a valid copy constructor, defined according to effective C++ style 

Definition at line 90 of file Ali\-HLTComponent\-Handler.cxx.

References HLTFatal.

\footnotesize\begin{verbatim}91   :
92   fComponentList(),
93   fScheduleList(),
94   fLibraryList(),
95   fEnvironment(),
96   fStandardList()
97 {
98   // see header file for class documentation
99   HLTFatal("copy constructor untested");
100 }

\end{verbatim}\normalsize 


\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!~AliHLTComponentHandler@{$\sim$AliHLTComponentHandler}}
\index{~AliHLTComponentHandler@{$\sim$AliHLTComponentHandler}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}Ali\-HLTComponent\-Handler::$\sim${\bf Ali\-HLTComponent\-Handler} ()\hspace{0.3cm}{\tt  [virtual]}}\label{classAliHLTComponentHandler_a4}


destructor 

Definition at line 109 of file Ali\-HLTComponent\-Handler.cxx.

References Delete\-Standard\-Components(), and Unload\-Libraries().

\footnotesize\begin{verbatim}110 {
111   // see header file for class documentation
112   DeleteStandardComponents();
113   UnloadLibraries();
114 }
\end{verbatim}\normalsize 




\subsection{Member Function Documentation}
\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!AddStandardComponents@{AddStandardComponents}}
\index{AddStandardComponents@{AddStandardComponents}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int Ali\-HLTComponent\-Handler::Add\-Standard\-Components ()}\label{classAliHLTComponentHandler_a13}


Add standard components The standard components are part of the lib\-HLTbase library and need therefore a special handling. 

Definition at line 447 of file Ali\-HLTComponent\-Handler.cxx.

References Register\-Scheduled\-Components(), Ali\-HLTComponent::Set\-Global\-Component\-Handler(), and Ali\-HLTComponent::Unset\-Global\-Component\-Handler().

Referenced by Ali\-HLTComponent\-Handler().

\footnotesize\begin{verbatim}448 {
449   // see header file for class documentation
450   int iResult=0;
451   AliHLTComponent::SetGlobalComponentHandler(this);
452 //   fStandardList.push_back(new AliHLTFilePublisher);
453 //   fStandardList.push_back(new AliHLTFileWriter);
454 //   fStandardList.push_back(new AliHLTRootFilePublisherComponent);
455 //   fStandardList.push_back(new AliHLTRootFileWriterComponent);
456   AliHLTComponent::UnsetGlobalComponentHandler();
457   iResult=RegisterScheduledComponents();
458   return iResult;
459 }
\end{verbatim}\normalsize 


\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!AnnounceVersion@{AnnounceVersion}}
\index{AnnounceVersion@{AnnounceVersion}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int Ali\-HLTComponent\-Handler::Announce\-Version ()}\label{classAliHLTComponentHandler_a18}


Announce version and compilation info of the base library. 

Definition at line 116 of file Ali\-HLTComponent\-Handler.cxx.

References HLTInfo.

Referenced by Ali\-HLT\_\-C\_\-Component\_\-Init\-System().

\footnotesize\begin{verbatim}117 {
118   // see header file for class documentation
119   int iResult=0;
120 #ifdef PACKAGE_STRING
121   void HLTbaseCompileInfo( char*& date, char*& time);
122   char* date="";
123   char* time="";
124   HLTbaseCompileInfo(date, time);
125   if (!date) date="unknown";
126   if (!time) time="unknown";
127   HLTInfo("%s build on %s (%s)", PACKAGE_STRING, date, time);
128 #else
129   HLTInfo("ALICE High Level Trigger build on %s (%s) (embedded AliRoot build)", __DATE__, __TIME__);
130 #endif
131   return iResult;
132 }
\end{verbatim}\normalsize 


\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!ClassDef@{ClassDef}}
\index{ClassDef@{ClassDef}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}Ali\-HLTComponent\-Handler::Class\-Def ({\bf Ali\-HLTComponent\-Handler}, 0)\hspace{0.3cm}{\tt  [private]}}\label{classAliHLTComponentHandler_d6}


\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!CreateComponent@{CreateComponent}}
\index{CreateComponent@{CreateComponent}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int Ali\-HLTComponent\-Handler::Create\-Component (const char $\ast$ {\em component\-ID}, void $\ast$ {\em p\-Env\-Param}, {\bf Ali\-HLTComponent} $\ast$\& {\em component})\hspace{0.3cm}{\tt  [inline]}}\label{classAliHLTComponentHandler_a16}


Create a component of the given name (ID). Introduced for backward compatibility. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em component\-ID}]ID of the component to create \item[{\em p\-Env\-Param}]environment parameter for the component \item[{\em component}]reference to receive the create component instance \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]component pointer in component, neg. error code if failed \end{Desc}


Definition at line 166 of file Ali\-HLTComponent\-Handler.h.

References Create\-Component().

\footnotesize\begin{verbatim}168     {
169     return CreateComponent( componentID, pEnvParam, 0, NULL, component );
170     }
\end{verbatim}\normalsize 


\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!CreateComponent@{CreateComponent}}
\index{CreateComponent@{CreateComponent}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int Ali\-HLTComponent\-Handler::Create\-Component (const char $\ast$ {\em component\-ID}, void $\ast$ {\em p\-Env\-Param}, int {\em argc}, const char $\ast$$\ast$ {\em argv}, {\bf Ali\-HLTComponent} $\ast$\& {\em component})}\label{classAliHLTComponentHandler_a15}


Create a component of the given name (ID). The method tries to find a registerd component of id {\em component\-ID\/} and calls the {\em Spawn\/} method of the template component. After successful creation of a new object, the Init method is called in order to initialize the environment and the component arguments. \par
 The environment is the same for all components, but each component can have an additional private parameter {\em p\-Env\-Param\/}.\par
 The component arguments consist of an array of strings and the array size in the usual manner of the {\bf main()}{\rm (p.\,\pageref{PeakFinderTest_8cxx_a1})} function. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em component\-ID}]ID of the component to create \item[{\em p\-Env\-Param}]environment parameter for the component \item[{\em argc}]number of arguments in argv \item[{\em argv}]argument array like in {\bf main()}{\rm (p.\,\pageref{PeakFinderTest_8cxx_a1})} \item[{\em component}]reference to receive the create component instance \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]component pointer in component, neg. error code if failed \end{Desc}


Definition at line 180 of file Ali\-HLTComponent\-Handler.cxx.

References f\-Environment, Find\-Component(), HLTDebug, HLTError, HLTWarning, Ali\-HLTComponent::Init(), and Ali\-HLTComponent::Spawn().

Referenced by Ali\-HLT\_\-C\_\-Create\-Component(), Create\-Component(), and Ali\-HLTTask::Init().

\footnotesize\begin{verbatim}181 {
182   // see header file for class documentation
183   int iResult=0;
184   if (componentID) {
185     AliHLTComponent* pSample=FindComponent(componentID);
186     if (pSample!=NULL) {
187       component=pSample->Spawn();
188       if (component) {
189         HLTDebug("component \"%s\" created (%p)", componentID, component);
190         if ((iResult=component->Init(&fEnvironment, pEnvParam, argc, argv))!=0) {
191           HLTError("Initialization of component \"%s\" failed with error %d", componentID, iResult);
192           delete component;
193           component=NULL;
194         }
195       } else {
196         HLTError("can not spawn component \"%s\"", componentID);
197         iResult=-ENOENT;
198       }
199     } else {
200       HLTWarning("can not find component \"%s\"", componentID);
201       iResult=-ENOENT;
202     }
203   } else {
204     iResult=-EINVAL;
205   }
206   return iResult;
207 }
\end{verbatim}\normalsize 


\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!DeleteStandardComponents@{DeleteStandardComponents}}
\index{DeleteStandardComponents@{DeleteStandardComponents}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int Ali\-HLTComponent\-Handler::Delete\-Standard\-Components ()}\label{classAliHLTComponentHandler_a14}




Definition at line 476 of file Ali\-HLTComponent\-Handler.cxx.

References f\-Standard\-List.

Referenced by $\sim$Ali\-HLTComponent\-Handler().

\footnotesize\begin{verbatim}477 {
478   // see header file for class documentation
479   int iResult=0;
480   vector<AliHLTComponent*>::iterator element=fStandardList.begin();
481   while (element!=fStandardList.end()) {
482     //DeregisterComponent((*element)->GetComponentID());
483     delete(*element);
484     fStandardList.erase(element);
485     element=fStandardList.begin();
486   }
487   return iResult;
488 }
\end{verbatim}\normalsize 


\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!DeregisterComponent@{DeregisterComponent}}
\index{DeregisterComponent@{DeregisterComponent}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int Ali\-HLTComponent\-Handler::Deregister\-Component (const char $\ast$ {\em component\-ID})}\label{classAliHLTComponentHandler_a12}


Deregister a component. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em component\-ID}]ID of the component \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]neg. error code if failed \end{Desc}


Definition at line 155 of file Ali\-HLTComponent\-Handler.cxx.

References HLTWarning.

\footnotesize\begin{verbatim}156 {
157   // see header file for class documentation
158 
159   int iResult=0;
160   if (componentID) {
161     HLTWarning("not yet implemented, please notify the developers if you need this function");
162   } else {
163     iResult=-EINVAL;
164   }
165   return iResult;
166 }
\end{verbatim}\normalsize 


\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!FindComponent@{FindComponent}}
\index{FindComponent@{FindComponent}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf Ali\-HLTComponent} $\ast$ Ali\-HLTComponent\-Handler::Find\-Component (const char $\ast$ {\em component\-ID})\hspace{0.3cm}{\tt  [private]}}\label{classAliHLTComponentHandler_d1}


Find a component. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em component\-ID}]ID of the component to find \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]descriptor \end{Desc}


Definition at line 229 of file Ali\-HLTComponent\-Handler.cxx.

References f\-Component\-List, and Find\-Component\-Index().

Referenced by Create\-Component(), and Register\-Component().

\footnotesize\begin{verbatim}230 {
231   // see header file for class documentation
232   AliHLTComponent* pSample=NULL;
233   Int_t index=FindComponentIndex(componentID);
234   if (index>=0) {
235     pSample=(AliHLTComponent*)fComponentList.at(index);
236   }
237   return pSample;
238 }
\end{verbatim}\normalsize 


\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!FindComponentIndex@{FindComponentIndex}}
\index{FindComponentIndex@{FindComponentIndex}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}Int\_\-t Ali\-HLTComponent\-Handler::Find\-Component\-Index (const char $\ast$ {\em component\-ID})\hspace{0.3cm}{\tt  [private]}}\label{classAliHLTComponentHandler_d0}


Find a component. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em component\-ID}]ID of the component to find \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]index, neg. error code if failed \end{Desc}


Definition at line 209 of file Ali\-HLTComponent\-Handler.cxx.

References f\-Component\-List.

Referenced by Find\-Component().

\footnotesize\begin{verbatim}210 {
211   // see header file for class documentation
212   Int_t iResult=0;
213   if (componentID) {
214     vector<AliHLTComponent*>::iterator element=fComponentList.begin();
215     while (element!=fComponentList.end() && iResult>=0) {
216       if (strcmp(componentID, (*element)->GetComponentID())==0) {
217         break;
218       }
219       element++;
220       iResult++;
221     }
222     if (element==fComponentList.end()) iResult=-ENOENT;
223   } else {
224     iResult=-EINVAL;
225   }
226   return iResult;
227 }
\end{verbatim}\normalsize 


\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!FindLibrary@{FindLibrary}}
\index{FindLibrary@{FindLibrary}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf Ali\-HLTComponent\-Handler::Ali\-HLTLib\-Handle} $\ast$ Ali\-HLTComponent\-Handler::Find\-Library (const char $\ast$ {\em library})\hspace{0.3cm}{\tt  [private]}}\label{classAliHLTComponentHandler_d4}


Find a specific library among the loaded libraries. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em library}]library name/path \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]pointer to {\bf Ali\-HLTLib\-Handle}{\rm (p.\,\pageref{structAliHLTComponentHandler_1_1AliHLTLibHandle})} \end{Desc}


Definition at line 431 of file Ali\-HLTComponent\-Handler.cxx.

References f\-Library\-List.

Referenced by Find\-Symbol(), and Load\-Library().

\footnotesize\begin{verbatim}432 {
433   // see header file for class documentation
434   AliHLTLibHandle* hLib=NULL;
435   vector<AliHLTLibHandle>::iterator element=fLibraryList.begin();
436   while (element!=fLibraryList.end()) {
437     TString* name=reinterpret_cast<TString*>((*element).fName);
438     if (name->CompareTo(library)==0) {
439       hLib=&(*element);
440       break;
441     }
442     element++;
443   }
444   return hLib;
445 }
\end{verbatim}\normalsize 


\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!FindSymbol@{FindSymbol}}
\index{FindSymbol@{FindSymbol}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void $\ast$ Ali\-HLTComponent\-Handler::Find\-Symbol (const char $\ast$ {\em library}, const char $\ast$ {\em symbol})}\label{classAliHLTComponentHandler_a7}


Find a symbol in a dynamically loaded library. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em library}]library \item[{\em symbol}]the symbol to find \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]void pointer to function \end{Desc}


Definition at line 416 of file Ali\-HLTComponent\-Handler.cxx.

References Ali\-HLTComponent\-Handler::Ali\-HLTLib\-Handle::f\-Handle, Find\-Library(), and Ali\-HLTComponent\-Handler::Ali\-HLTLib\-Handle::f\-Name.

Referenced by Ali\-HLTSystem::Find\-Dynamic\-Symbol(), and Ali\-HLTLogging::Init\-Ali\-Log\-Trap().

\footnotesize\begin{verbatim}417 {
418   // see header file for class documentation
419   AliHLTLibHandle* hLib=FindLibrary(library);
420   if (hLib==NULL) return NULL;
421   void* pFunc=NULL;
422 #ifdef HAVE_DLFCN_H
423   pFunc=dlsym(hLib->fHandle, symbol);
424 #else
425   TString* name=reinterpret_cast<TString*>(hLib->fName);
426   pFunc=gSystem->DynFindSymbol(name->Data(), symbol);
427 #endif
428   return pFunc;
429 }
\end{verbatim}\normalsize 


\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!InsertComponent@{InsertComponent}}
\index{InsertComponent@{InsertComponent}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}Int\_\-t Ali\-HLTComponent\-Handler::Insert\-Component ({\bf Ali\-HLTComponent} $\ast$ {\em p\-Sample})\hspace{0.3cm}{\tt  [private]}}\label{classAliHLTComponentHandler_d2}


Insert component to the list \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em p\-Sample}]sample object of the component \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]neg. error code if failed \end{Desc}


Definition at line 240 of file Ali\-HLTComponent\-Handler.cxx.

References f\-Component\-List.

Referenced by Register\-Component().

\footnotesize\begin{verbatim}241 {
242   // see header file for class documentation
243   Int_t iResult=0;
244   if (pSample!=NULL) {
245     fComponentList.push_back(pSample);
246   } else {
247     iResult=-EINVAL;
248   }
249   return iResult;
250 }
\end{verbatim}\normalsize 


\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!List@{List}}
\index{List@{List}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Ali\-HLTComponent\-Handler::List ()}\label{classAliHLTComponentHandler_a17}


Print registered components to stdout. \begin{Desc}
\item[Returns:]none \end{Desc}


Definition at line 252 of file Ali\-HLTComponent\-Handler.cxx.

References f\-Component\-List, and HLTInfo.

\footnotesize\begin{verbatim}253 {
254   // see header file for class documentation
255   vector<AliHLTComponent*>::iterator element=fComponentList.begin();
256   int index=0;
257   while (element!=fComponentList.end()) {
258     HLTInfo("%d. %s", index++, (*element++)->GetComponentID());
259   }
260 }
\end{verbatim}\normalsize 


\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!LoadLibrary@{LoadLibrary}}
\index{LoadLibrary@{LoadLibrary}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int Ali\-HLTComponent\-Handler::Load\-Library (const char $\ast$ {\em library\-Path})}\label{classAliHLTComponentHandler_a6}


Load a component shared library. The component library needs to be loaded from the Component\-Hanler in order to automatically register all components in the library. Registration is done by passing a sample object of the component to the handler. The object has to be valid during the whole runtime and should thus be a global object which is ONLY used for the purpose of registration. This also ensures automatically registration at library load time. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em library\-Path}]const char string containing the library name/path \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]0 if succeeded, neg. error code if failed \end{Desc}


Definition at line 277 of file Ali\-HLTComponent\-Handler.cxx.

References Ali\-HLTComponent\-Handler::Ali\-HLTLib\-Handle::f\-Handle, Find\-Library(), f\-Library\-List, Ali\-HLTComponent\-Handler::Ali\-HLTLib\-Handle::f\-Name, HLTDebug, HLTError, HLTInfo, Register\-Scheduled\-Components(), Ali\-HLTComponent::Set\-Global\-Component\-Handler(), and Ali\-HLTComponent::Unset\-Global\-Component\-Handler().

Referenced by Ali\-HLT\_\-C\_\-Component\_\-Load\-Library(), Ali\-HLTLogging::Init\-Ali\-Log\-Trap(), and Ali\-HLTSystem::Load\-Component\-Libraries().

\footnotesize\begin{verbatim}278 {
279   // see header file for class documentation
280   int iResult=0;
281   if (libraryPath) {
282     AliHLTComponent::SetGlobalComponentHandler(this);
283     AliHLTLibHandle hLib;
284     const char* loadtype="";
285 #ifdef HAVE_DLFCN_H
286     // use interface to the dynamic linking loader
287     hLib.fHandle=dlopen(libraryPath, RTLD_NOW);
288     loadtype="dlopen";
289 #else
290     // use ROOT dynamic loader
291     // check if the library was already loaded, as Load returns
292     // 'failure' if the library was already loaded
293     AliHLTLibHandle* pLib=FindLibrary(libraryPath);
294     if (pLib) {
295         int* pRootHandle=reinterpret_cast<int*>(pLib->fHandle);
296         (*pRootHandle)++;
297         HLTDebug("instance %d of library %s loaded", (*pRootHandle), libraryPath);
298         hLib.fHandle=pRootHandle;
299     }
300     
301     if (hLib.fHandle==NULL && gSystem->Load(libraryPath)==0) {
302       int* pRootHandle=new int;
303       if (pRootHandle) *pRootHandle=1;
304       hLib.fHandle=pRootHandle;
305       //HLTDebug("library %s loaded via gSystem", libraryPath);
306     }
307     loadtype="gSystem";
308 #endif //HAVE_DLFCN_H
309     if (hLib.fHandle!=NULL) {
310       // create TString object to store library path and use pointer as handle 
311       hLib.fName=new TString(libraryPath);
312       HLTInfo("library %s loaded (%s)", libraryPath, loadtype);
313       fLibraryList.insert(fLibraryList.begin(), hLib);
314       iResult=RegisterScheduledComponents();
315     } else {
316       HLTError("can not load library %s", libraryPath);
317 #ifdef HAVE_DLFCN_H
318       HLTError("dlopen error: %s", dlerror());
319 #endif //HAVE_DLFCN_H
320 #ifdef __APPLE__
321       iResult=-EFTYPE;
322 #else
323       iResult=-ELIBACC;
324 #endif
325     }
326     AliHLTComponent::UnsetGlobalComponentHandler();
327   } else {
328     iResult=-EINVAL;
329   }
330   return iResult;
331 }
\end{verbatim}\normalsize 


\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!operator=@{operator=}}
\index{operator=@{operator=}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf Ali\-HLTComponent\-Handler} \& Ali\-HLTComponent\-Handler::operator= (const {\bf Ali\-HLTComponent\-Handler} \&)}\label{classAliHLTComponentHandler_a3}


not a valid assignment op, but defined according to effective C++ style 

Definition at line 102 of file Ali\-HLTComponent\-Handler.cxx.

References HLTFatal.

\footnotesize\begin{verbatim}103 { 
104   // see header file for class documentation
105   HLTFatal("assignment operator untested");
106   return *this;
107 }
\end{verbatim}\normalsize 


\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!RegisterComponent@{RegisterComponent}}
\index{RegisterComponent@{RegisterComponent}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}Int\_\-t Ali\-HLTComponent\-Handler::Register\-Component ({\bf Ali\-HLTComponent} $\ast$ {\em p\-Sample})}\label{classAliHLTComponentHandler_a10}


Register a component. Registration is done by passing a sample object of the component to the handler. The object has to be valid during the whole runtime and should thus be a global object which is ONLY used for the purpose of registration. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em p\-Sample}]a sample object of the component \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]neg. error code if failed \end{Desc}


Definition at line 134 of file Ali\-HLTComponent\-Handler.cxx.

References Find\-Component(), Ali\-HLTComponent::Get\-Component\-ID(), HLTDebug, HLTInfo, and Insert\-Component().

Referenced by Register\-Scheduled\-Components().

\footnotesize\begin{verbatim}135 {
136   // see header file for class documentation
137   Int_t iResult=0;
138   if (pSample) {
139     if (FindComponent(pSample->GetComponentID())==NULL) {
140       iResult=InsertComponent(pSample);
141       if (iResult>=0) {
142         HLTInfo("component %s registered", pSample->GetComponentID());
143       }
144     } else {
145       // component already registered
146       HLTDebug("component %s already registered, skipped", pSample->GetComponentID());
147       iResult=-EEXIST;
148     }
149   } else {
150     iResult=-EINVAL;
151   }
152   return iResult;
153 }
\end{verbatim}\normalsize 


\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!RegisterScheduledComponents@{RegisterScheduledComponents}}
\index{RegisterScheduledComponents@{RegisterScheduledComponents}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int Ali\-HLTComponent\-Handler::Register\-Scheduled\-Components ()}\label{classAliHLTComponentHandler_a11}


Registers all scheduled components. 

Definition at line 461 of file Ali\-HLTComponent\-Handler.cxx.

References f\-Schedule\-List, and Register\-Component().

Referenced by Add\-Standard\-Components(), and Load\-Library().

\footnotesize\begin{verbatim}462 {
463   // see header file for class documentation
464   int iResult=0;
465   vector<AliHLTComponent*>::iterator element=fScheduleList.begin();
466   int iLocalResult=0;
467   while (element!=fScheduleList.end()) {
468     iLocalResult=RegisterComponent(*element);
469     if (iResult==0) iResult=iLocalResult;
470     fScheduleList.erase(element);
471     element=fScheduleList.begin();
472   }
473   return iResult;
474 }
\end{verbatim}\normalsize 


\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!ScheduleRegister@{ScheduleRegister}}
\index{ScheduleRegister@{ScheduleRegister}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}Int\_\-t Ali\-HLTComponent\-Handler::Schedule\-Register ({\bf Ali\-HLTComponent} $\ast$ {\em p\-Sample})}\label{classAliHLTComponentHandler_a9}


Schedule a component for registration. Full registration will be done after successfull loading of the shared library. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em p\-Sample}]a sample object of the component \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]neg. error code if failed \end{Desc}


Definition at line 168 of file Ali\-HLTComponent\-Handler.cxx.

References f\-Schedule\-List.

Referenced by Ali\-HLTComponent::Ali\-HLTComponent().

\footnotesize\begin{verbatim}169 {
170   // see header file for class documentation
171   Int_t iResult=0;
172   if (pSample) {
173     fScheduleList.push_back(pSample);
174   } else {
175     iResult=-EINVAL;
176   }
177   return iResult;
178 }
\end{verbatim}\normalsize 


\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!SetEnvironment@{SetEnvironment}}
\index{SetEnvironment@{SetEnvironment}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Ali\-HLTComponent\-Handler::Set\-Environment ({\bf Ali\-HLTComponent\-Environment} $\ast$ {\em p\-Env})}\label{classAliHLTComponentHandler_a5}


Set the environment for the HLT framework. The environment mainly consists of function pointers for the integration of the HLT framework into a system like the Pub\-Sub online system or Ali\-Root offline system. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em p\-Env}]pointer to {\bf Ali\-HLTComponent\-Environment}{\rm (p.\,\pageref{structAliHLTComponentEnvironment})} structure \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]none \end{Desc}


Definition at line 262 of file Ali\-HLTComponent\-Handler.cxx.

References f\-Environment, Ali\-HLTComponent\-Environment::f\-Logging\-Func, and Ali\-HLTLogging::Init().

\footnotesize\begin{verbatim}263 {
264   // see header file for class documentation
265   if (pEnv) {
266     memcpy(&fEnvironment, pEnv, sizeof(AliHLTComponentEnvironment));
267     if (fEnvironment.fLoggingFunc) {
268       // the AliHLTLogging::Init method also sets the stream output
269       // and notification handler to AliLog. This should only be done
270       // if the logging environment contains a logging function
271       // for redirection
272       AliHLTLogging::Init(fEnvironment.fLoggingFunc);
273     }
274   }
275 }
\end{verbatim}\normalsize 


\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!UnloadLibraries@{UnloadLibraries}}
\index{UnloadLibraries@{UnloadLibraries}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int Ali\-HLTComponent\-Handler::Unload\-Libraries ()\hspace{0.3cm}{\tt  [private]}}\label{classAliHLTComponentHandler_d3}


Close all libraries. \begin{Desc}
\item[Returns:]neg. error code if failed \end{Desc}


Definition at line 403 of file Ali\-HLTComponent\-Handler.cxx.

References f\-Library\-List, and Unload\-Library().

Referenced by $\sim$Ali\-HLTComponent\-Handler().

\footnotesize\begin{verbatim}404 {
405   // see header file for class documentation
406   int iResult=0;
407   vector<AliHLTLibHandle>::iterator element=fLibraryList.begin();
408   while (element!=fLibraryList.end()) {
409     UnloadLibrary(*element);
410     fLibraryList.erase(element);
411     element=fLibraryList.begin();
412   }
413   return iResult;
414 }
\end{verbatim}\normalsize 


\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!UnloadLibrary@{UnloadLibrary}}
\index{UnloadLibrary@{UnloadLibrary}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int Ali\-HLTComponent\-Handler::Unload\-Library ({\bf Ali\-HLTComponent\-Handler::Ali\-HLTLib\-Handle} \& {\em handle})\hspace{0.3cm}{\tt  [private]}}\label{classAliHLTComponentHandler_d5}


Unload a component shared library. All components will be de-registered when the last instance of the library was unloaded. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em handle}]handle to the library to unload \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]0 if succeeded, neg. error code if failed \end{Desc}


Definition at line 354 of file Ali\-HLTComponent\-Handler.cxx.

References Ali\-HLTComponent\-Handler::Ali\-HLTLib\-Handle::f\-Handle, Ali\-HLTComponent\-Handler::Ali\-HLTLib\-Handle::f\-Name, HLTDebug, HLTError, and HLTWarning.

\footnotesize\begin{verbatim}355 {
356   // see header file for class documentation
357   int iResult=0;
358   fgAliLoggingFunc=NULL;
359   TString* pName=reinterpret_cast<TString*>(handle.fName);
360 #ifdef HAVE_DLFCN_H
361   dlclose(handle.fHandle);
362 #else
363   int* pCount=reinterpret_cast<int*>(handle.fHandle);
364   if (--(*pCount)==0) {
365     if (pName) {
384     }
385     else {
386       HLTError("missing library name, can not unload");
387     }
388     delete pCount;
389   }
390 #endif //HAVE_DLFCN_H
391   handle.fName=NULL;
392   handle.fHandle=NULL;
393   if (pName) {
394     HLTDebug("unload library %s", pName->Data());
395     delete pName;
396   } else {
397     HLTWarning("missing name for unloaded library");
398   }
399   pName=NULL;
400   return iResult;
401 }
\end{verbatim}\normalsize 


\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!UnloadLibrary@{UnloadLibrary}}
\index{UnloadLibrary@{UnloadLibrary}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int Ali\-HLTComponent\-Handler::Unload\-Library (const char $\ast$ {\em library\-Path})}\label{classAliHLTComponentHandler_a8}


Unload a component shared library. All components will be de-registered when the last instance of the library was unloaded. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em library\-Path}]library name as specified to {\bf Load\-Library}{\rm (p.\,\pageref{classAliHLTComponentHandler_a6})} \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]0 if succeeded, neg. error code if failed \end{Desc}


Definition at line 333 of file Ali\-HLTComponent\-Handler.cxx.

References f\-Library\-List.

Referenced by Ali\-HLT\_\-C\_\-Component\_\-Unload\-Library(), and Unload\-Libraries().

\footnotesize\begin{verbatim}334 {
335   // see header file for class documentation
336   int iResult=0;
337   if (libraryPath) {
338     vector<AliHLTLibHandle>::iterator element=fLibraryList.begin();
339     while (element!=fLibraryList.end()) {
340       TString* pName=reinterpret_cast<TString*>((*element).fName);
341       if (pName->CompareTo(libraryPath)==0) {
342         UnloadLibrary(*element);
343         fLibraryList.erase(element);
344         break;
345       }
346       element++;
347   }
348   } else {
349     iResult=-EINVAL;
350   }
351   return iResult;
352 }
\end{verbatim}\normalsize 




\subsection{Member Data Documentation}
\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!fComponentList@{fComponentList}}
\index{fComponentList@{fComponentList}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}vector$<${\bf Ali\-HLTComponent}$\ast$$>$ {\bf Ali\-HLTComponent\-Handler::f\-Component\-List}\hspace{0.3cm}{\tt  [private]}}\label{classAliHLTComponentHandler_r0}


list of registered components 

Definition at line 241 of file Ali\-HLTComponent\-Handler.h.

Referenced by Find\-Component(), Find\-Component\-Index(), Insert\-Component(), and List().\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!fEnvironment@{fEnvironment}}
\index{fEnvironment@{fEnvironment}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf Ali\-HLTComponent\-Environment} {\bf Ali\-HLTComponent\-Handler::f\-Environment}\hspace{0.3cm}{\tt  [private]}}\label{classAliHLTComponentHandler_r3}


running environment for the component 

Definition at line 247 of file Ali\-HLTComponent\-Handler.h.

Referenced by Ali\-HLTComponent\-Handler(), Create\-Component(), and Set\-Environment().\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!fLibraryList@{fLibraryList}}
\index{fLibraryList@{fLibraryList}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}vector$<${\bf Ali\-HLTLib\-Handle}$>$ {\bf Ali\-HLTComponent\-Handler::f\-Library\-List}\hspace{0.3cm}{\tt  [private]}}\label{classAliHLTComponentHandler_r2}


list of libraries 

Definition at line 245 of file Ali\-HLTComponent\-Handler.h.

Referenced by Find\-Library(), Load\-Library(), Unload\-Libraries(), and Unload\-Library().\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!fScheduleList@{fScheduleList}}
\index{fScheduleList@{fScheduleList}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}vector$<${\bf Ali\-HLTComponent}$\ast$$>$ {\bf Ali\-HLTComponent\-Handler::f\-Schedule\-List}\hspace{0.3cm}{\tt  [private]}}\label{classAliHLTComponentHandler_r1}


list of scheduled components 

Definition at line 243 of file Ali\-HLTComponent\-Handler.h.

Referenced by Register\-Scheduled\-Components(), and Schedule\-Register().\index{AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}!fStandardList@{fStandardList}}
\index{fStandardList@{fStandardList}!AliHLTComponentHandler@{Ali\-HLTComponent\-Handler}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}vector$<${\bf Ali\-HLTComponent}$\ast$$>$ {\bf Ali\-HLTComponent\-Handler::f\-Standard\-List}\hspace{0.3cm}{\tt  [private]}}\label{classAliHLTComponentHandler_r4}


list of standard components 

Definition at line 249 of file Ali\-HLTComponent\-Handler.h.

Referenced by Delete\-Standard\-Components().

The documentation for this class was generated from the following files:\begin{CompactItemize}
\item 
/home/perthi/cern/aliroot/Ali\-Root\_\-head020507/HLT/BASE/{\bf Ali\-HLTComponent\-Handler.h}\item 
/home/perthi/cern/aliroot/Ali\-Root\_\-head020507/HLT/BASE/{\bf Ali\-HLTComponent\-Handler.cxx}\end{CompactItemize}
