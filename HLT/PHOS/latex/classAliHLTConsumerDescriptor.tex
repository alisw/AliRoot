\section{Ali\-HLTConsumer\-Descriptor Class Reference}
\label{classAliHLTConsumerDescriptor}\index{AliHLTConsumerDescriptor@{AliHLTConsumerDescriptor}}
{\tt \#include $<$Ali\-HLTConsumer\-Descriptor.h$>$}

Inheritance diagram for Ali\-HLTConsumer\-Descriptor::\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2cm]{classAliHLTConsumerDescriptor}
\end{center}
\end{figure}


\subsection{Detailed Description}
Helper class to describe a consumer component. 

There is unfortunately no unique determination of the data type from the component itself possible, thats why both component and data type have to be initialized and are stored in a compound. The class is intended to make bookkeeping easier.

\begin{Desc}
\item[Note:]This class is only used for the {\bf HLT integration into Ali\-Root}{\rm (p.\,\pageref{group__alihlt__system})}. \end{Desc}




Definition at line 30 of file Ali\-HLTConsumer\-Descriptor.h.\subsection*{Public Member Functions}
\begin{CompactItemize}
\item 
{\bf Ali\-HLTConsumer\-Descriptor} ()
\item 
{\bf Ali\-HLTConsumer\-Descriptor} ({\bf Ali\-HLTComponent} $\ast$p\-Consumer)
\item 
{\bf Ali\-HLTConsumer\-Descriptor} (const {\bf Ali\-HLTConsumer\-Descriptor} \&)
\item 
{\bf Ali\-HLTConsumer\-Descriptor} \& {\bf operator=} (const {\bf Ali\-HLTConsumer\-Descriptor} \&)
\item 
{\bf $\sim$Ali\-HLTConsumer\-Descriptor} ()
\item 
{\bf Ali\-HLTComponent} $\ast$ {\bf Get\-Component} ()
\item 
int {\bf Set\-Active\-Data\-Segment} ({\bf Ali\-HLTUInt32\_\-t} offset, {\bf Ali\-HLTUInt32\_\-t} size)
\item 
int {\bf Check\-Active\-Data\-Segment} ({\bf Ali\-HLTUInt32\_\-t} offset, {\bf Ali\-HLTUInt32\_\-t} size)
\item 
int {\bf Get\-Nof\-Active\-Segments} ()
\item 
int {\bf Release\-Active\-Data\-Segment} ({\bf Ali\-HLTUInt32\_\-t} offset, {\bf Ali\-HLTUInt32\_\-t} size)
\end{CompactItemize}
\subsection*{Private Attributes}
\begin{CompactItemize}
\item 
{\bf Ali\-HLTComponent} $\ast$ {\bf fp\-Consumer}
\item 
vector$<$ {\bf Ali\-HLTData\-Buffer::Ali\-HLTData\-Segment} $>$ {\bf f\-Segments}
\begin{CompactList}\small\item\em transient \item\end{CompactList}\end{CompactItemize}


\subsection{Constructor \& Destructor Documentation}
\index{AliHLTConsumerDescriptor@{Ali\-HLTConsumer\-Descriptor}!AliHLTConsumerDescriptor@{AliHLTConsumerDescriptor}}
\index{AliHLTConsumerDescriptor@{AliHLTConsumerDescriptor}!AliHLTConsumerDescriptor@{Ali\-HLTConsumer\-Descriptor}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}Ali\-HLTConsumer\-Descriptor::Ali\-HLTConsumer\-Descriptor ()}\label{classAliHLTConsumerDescriptor_a0}


standard constructur \index{AliHLTConsumerDescriptor@{Ali\-HLTConsumer\-Descriptor}!AliHLTConsumerDescriptor@{AliHLTConsumerDescriptor}}
\index{AliHLTConsumerDescriptor@{AliHLTConsumerDescriptor}!AliHLTConsumerDescriptor@{Ali\-HLTConsumer\-Descriptor}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}Ali\-HLTConsumer\-Descriptor::Ali\-HLTConsumer\-Descriptor ({\bf Ali\-HLTComponent} $\ast$ {\em p\-Consumer})}\label{classAliHLTConsumerDescriptor_a1}


constructur \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em p\-Consumer}]pointer to the consumer component \end{description}
\end{Desc}


Definition at line 46 of file Ali\-HLTConsumer\-Descriptor.cxx.

References f\-Segments.

\footnotesize\begin{verbatim}47   :
48   fpConsumer(pConsumer),
49   fSegments()
50 {
51   // see header file for function documentation
52   fSegments.clear();
53 }

\end{verbatim}\normalsize 


\index{AliHLTConsumerDescriptor@{Ali\-HLTConsumer\-Descriptor}!AliHLTConsumerDescriptor@{AliHLTConsumerDescriptor}}
\index{AliHLTConsumerDescriptor@{AliHLTConsumerDescriptor}!AliHLTConsumerDescriptor@{Ali\-HLTConsumer\-Descriptor}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}Ali\-HLTConsumer\-Descriptor::Ali\-HLTConsumer\-Descriptor (const {\bf Ali\-HLTConsumer\-Descriptor} \&)}\label{classAliHLTConsumerDescriptor_a2}


not a valid copy constructor, defined according to effective C++ style 

Definition at line 55 of file Ali\-HLTConsumer\-Descriptor.cxx.

\footnotesize\begin{verbatim}56   :
57   TObject(),
58   AliHLTLogging(),
59   fpConsumer(desc.fpConsumer),
60   fSegments()
61 {
62   // see header file for function documentation
63 
64   // we can simply transfer the pointer to th new object since there are no
65   // release actions in the destructor
66 }

\end{verbatim}\normalsize 


\index{AliHLTConsumerDescriptor@{Ali\-HLTConsumer\-Descriptor}!~AliHLTConsumerDescriptor@{$\sim$AliHLTConsumerDescriptor}}
\index{~AliHLTConsumerDescriptor@{$\sim$AliHLTConsumerDescriptor}!AliHLTConsumerDescriptor@{Ali\-HLTConsumer\-Descriptor}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}Ali\-HLTConsumer\-Descriptor::$\sim${\bf Ali\-HLTConsumer\-Descriptor} ()}\label{classAliHLTConsumerDescriptor_a4}


destructor 

Definition at line 78 of file Ali\-HLTConsumer\-Descriptor.cxx.

References f\-Segments.

\footnotesize\begin{verbatim}79 {
80   // see header file for function documentation
81   if (fSegments.size()>0) {
82     //HLTWarning("unreleased data segments found");
83   }
84 }
\end{verbatim}\normalsize 




\subsection{Member Function Documentation}
\index{AliHLTConsumerDescriptor@{Ali\-HLTConsumer\-Descriptor}!CheckActiveDataSegment@{CheckActiveDataSegment}}
\index{CheckActiveDataSegment@{CheckActiveDataSegment}!AliHLTConsumerDescriptor@{Ali\-HLTConsumer\-Descriptor}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int Ali\-HLTConsumer\-Descriptor::Check\-Active\-Data\-Segment ({\bf Ali\-HLTUInt32\_\-t} {\em offset}, {\bf Ali\-HLTUInt32\_\-t} {\em size})}\label{classAliHLTConsumerDescriptor_a7}


Check whether there is an active data segment of certain size with certain offset. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em offset}]offset of the data segment in the data buffer \item[{\em size}]size of the data segment in the data buffer \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]$>$ if existend, 0 if not \end{Desc}


Definition at line 96 of file Ali\-HLTConsumer\-Descriptor.cxx.

References f\-Segments.

Referenced by Ali\-HLTData\-Buffer::Release().

\footnotesize\begin{verbatim}97 {
98   // see header file for function documentation
99   int iResult=0;
100   if (fSegments.size()>0) {
101     vector<AliHLTDataBuffer::AliHLTDataSegment>::iterator segment=fSegments.begin();
102     while (segment!=fSegments.end()) {
103       if ((iResult=((*segment).fSegmentOffset==offset && (*segment).fSegmentSize==size))>0) {
104         break;
105       }
106       segment++;
107     }
108   } else {
109     //HLTWarning("no data segment active for consumer %p", this);
110     iResult=-ENODATA;
111   }
112   return iResult;
113 }
\end{verbatim}\normalsize 


\index{AliHLTConsumerDescriptor@{Ali\-HLTConsumer\-Descriptor}!GetComponent@{GetComponent}}
\index{GetComponent@{GetComponent}!AliHLTConsumerDescriptor@{Ali\-HLTConsumer\-Descriptor}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf Ali\-HLTComponent}$\ast$ Ali\-HLTConsumer\-Descriptor::Get\-Component ()\hspace{0.3cm}{\tt  [inline]}}\label{classAliHLTConsumerDescriptor_a5}


Get the component of this descriptor. \begin{Desc}
\item[Returns:]pointer to the component \end{Desc}


Definition at line 49 of file Ali\-HLTConsumer\-Descriptor.h.

\footnotesize\begin{verbatim}49 {return fpConsumer;}
\end{verbatim}\normalsize 


\index{AliHLTConsumerDescriptor@{Ali\-HLTConsumer\-Descriptor}!GetNofActiveSegments@{GetNofActiveSegments}}
\index{GetNofActiveSegments@{GetNofActiveSegments}!AliHLTConsumerDescriptor@{Ali\-HLTConsumer\-Descriptor}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int Ali\-HLTConsumer\-Descriptor::Get\-Nof\-Active\-Segments ()\hspace{0.3cm}{\tt  [inline]}}\label{classAliHLTConsumerDescriptor_a8}


get the number of active segments for this consumer \begin{Desc}
\item[Returns:]number of active segments \end{Desc}


Definition at line 81 of file Ali\-HLTConsumer\-Descriptor.h.

References f\-Segments.

Referenced by Ali\-HLTData\-Buffer::Release().

\footnotesize\begin{verbatim}81 {return fSegments.size();};
\end{verbatim}\normalsize 


\index{AliHLTConsumerDescriptor@{Ali\-HLTConsumer\-Descriptor}!operator=@{operator=}}
\index{operator=@{operator=}!AliHLTConsumerDescriptor@{Ali\-HLTConsumer\-Descriptor}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf Ali\-HLTConsumer\-Descriptor} \& Ali\-HLTConsumer\-Descriptor::operator= (const {\bf Ali\-HLTConsumer\-Descriptor} \&)}\label{classAliHLTConsumerDescriptor_a3}


not a valid assignment op, but defined according to effective C++ style 

Definition at line 68 of file Ali\-HLTConsumer\-Descriptor.cxx.

References fp\-Consumer.

\footnotesize\begin{verbatim}69 { 
70   // see header file for function documentation
71 
72   // we can simply transfer the pointer to th new object since there are no
73   // release actions in the destructor
74   fpConsumer=desc.fpConsumer;
75   return *this;
76 }
\end{verbatim}\normalsize 


\index{AliHLTConsumerDescriptor@{Ali\-HLTConsumer\-Descriptor}!ReleaseActiveDataSegment@{ReleaseActiveDataSegment}}
\index{ReleaseActiveDataSegment@{ReleaseActiveDataSegment}!AliHLTConsumerDescriptor@{Ali\-HLTConsumer\-Descriptor}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int Ali\-HLTConsumer\-Descriptor::Release\-Active\-Data\-Segment ({\bf Ali\-HLTUInt32\_\-t} {\em offset}, {\bf Ali\-HLTUInt32\_\-t} {\em size})}\label{classAliHLTConsumerDescriptor_a9}




Definition at line 115 of file Ali\-HLTConsumer\-Descriptor.cxx.

References f\-Segments.

Referenced by Ali\-HLTData\-Buffer::Release().

\footnotesize\begin{verbatim}116 {
117   // see header file for function documentation
118   int iResult=0;
119   if (fSegments.size()>0) {
120     vector<AliHLTDataBuffer::AliHLTDataSegment>::iterator segment=fSegments.begin();
121     while (segment!=fSegments.end()) {
122       if ((iResult=((*segment).fSegmentOffset==offset && (*segment).fSegmentSize==size))>0) {
123         fSegments.erase(segment);
124         break;
125       }
126       segment++;
127     }
128     if (iResult==0) {
129       //HLTWarning("no data segment (%d:%d) active for consumer %p", offset, size, this);
130       iResult=-ENOENT;
131     }
132   } else {
133     //HLTWarning("no data segment active for consumer %p", this);
134     iResult=-ENODATA;
135   }
136   return iResult;
137 }
\end{verbatim}\normalsize 


\index{AliHLTConsumerDescriptor@{Ali\-HLTConsumer\-Descriptor}!SetActiveDataSegment@{SetActiveDataSegment}}
\index{SetActiveDataSegment@{SetActiveDataSegment}!AliHLTConsumerDescriptor@{Ali\-HLTConsumer\-Descriptor}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int Ali\-HLTConsumer\-Descriptor::Set\-Active\-Data\-Segment ({\bf Ali\-HLTUInt32\_\-t} {\em offset}, {\bf Ali\-HLTUInt32\_\-t} {\em size})}\label{classAliHLTConsumerDescriptor_a6}


Set an active data segment. the pointer will be handled in a container, no allocation, copy or cleanup. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em offset}]offset of the segment in the buffer \item[{\em size}]size of the segment in the buffer \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]$>$=0 if succeeded \end{Desc}


Definition at line 86 of file Ali\-HLTConsumer\-Descriptor.cxx.

References f\-Segments.

Referenced by Ali\-HLTData\-Buffer::Subscribe().

\footnotesize\begin{verbatim}87 {
88   // see header file for function documentation
89   int iResult=0;
90   AliHLTDataBuffer::AliHLTDataSegment segment(offset, size);
91   fSegments.push_back(segment);
92   //HLTDebug("set active segment (%d:%d) for consumer %p", offset, size, this);
93   return iResult;
94 }
\end{verbatim}\normalsize 




\subsection{Member Data Documentation}
\index{AliHLTConsumerDescriptor@{Ali\-HLTConsumer\-Descriptor}!fpConsumer@{fpConsumer}}
\index{fpConsumer@{fpConsumer}!AliHLTConsumerDescriptor@{Ali\-HLTConsumer\-Descriptor}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf Ali\-HLTComponent}$\ast$ {\bf Ali\-HLTConsumer\-Descriptor::fp\-Consumer}\hspace{0.3cm}{\tt  [private]}}\label{classAliHLTConsumerDescriptor_r0}


consumer object 

Definition at line 89 of file Ali\-HLTConsumer\-Descriptor.h.

Referenced by operator=().\index{AliHLTConsumerDescriptor@{Ali\-HLTConsumer\-Descriptor}!fSegments@{fSegments}}
\index{fSegments@{fSegments}!AliHLTConsumerDescriptor@{Ali\-HLTConsumer\-Descriptor}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}vector$<${\bf Ali\-HLTData\-Buffer::Ali\-HLTData\-Segment}$>$ {\bf Ali\-HLTConsumer\-Descriptor::f\-Segments}\hspace{0.3cm}{\tt  [private]}}\label{classAliHLTConsumerDescriptor_r1}


transient 

list of data segments 

Definition at line 92 of file Ali\-HLTConsumer\-Descriptor.h.

Referenced by Ali\-HLTConsumer\-Descriptor(), Check\-Active\-Data\-Segment(), Get\-Nof\-Active\-Segments(), Release\-Active\-Data\-Segment(), Set\-Active\-Data\-Segment(), and $\sim$Ali\-HLTConsumer\-Descriptor().

The documentation for this class was generated from the following files:\begin{CompactItemize}
\item 
/home/perthi/cern/aliroot/Ali\-Root\_\-head020507/HLT/BASE/{\bf Ali\-HLTConsumer\-Descriptor.h}\item 
/home/perthi/cern/aliroot/Ali\-Root\_\-head020507/HLT/BASE/{\bf Ali\-HLTConsumer\-Descriptor.cxx}\end{CompactItemize}
