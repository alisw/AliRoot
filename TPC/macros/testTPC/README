
The "small" framework to make fast action(e.g reconstruction) pass using batch systems

Example usage:
  $ALICE_ROOT/TPC/macros/testTPC/agent.sh /afs/cern.ch/user/m/miranov/public/test2008/reckr191xx
    if you run locally you should cd to your temp dir first, with 'cd /tmp/$USER'

  Or submit as many agents you want on batch machines:
  bsub -q 1nd $ALICE_ROOT/TPC/macros/testTPC/agent.sh /afs/cern.ch/user/m/miranov/public/test2008/reckr191xx


AGENT to run some action:
3 components to be present

0. CREATE ACTION LIST 

   0.a  Setup root, aliroot, alien (e.g. by doing 'source ~miranov/public/.bagentsetup')
   0.a  Get a valid token: with 'alien-token-init' 
   0.b  source the alien env: with 'source /tmp/gclient_env_$UID'
   0.c  create the action list 'job.list' by following the 
        example in '$ALICE_ROOT/TPC/macros/testTPC/AlienToolkit.cxx'
   0.d  if the first lines of this file contains entries like 
        '/alice/data/2008/LHC08a_TPC/000028164/collection'
        they need to be deleted
        


1. WORKING DIRECTORY SETUP (in prev. example /afs/cern.ch/user/m/miranov/public/test2008/reckr191xx), 
   what needs to be present:

   1.a  the action list (called job.list - hardwired)
   1.b  create an empty directory called 'out'
   1.c  create a directory called 'macros', containing the '<action>.C' scripts,  
        e.g 'rec.C'  'FindKrClustersRaw.C' etc.


2. ENVIRONMENT SETUP:

   2.a  Copy the script  to setup aliroot, root and the user specific env to the  ~/.bagentsetup
       (see /afs/cern.ch/user/m/miranov/public/.bagentsetup for an example)
   2.b  Export envirnment variables needed OCDB_PATH, AGENTINPUTTYPE, AGENTSE in the .bagentsetup script
   2.c  Get a valid token: with 'alien-token-init' if not done above
   2.d  Copy certificates to default place -  ~/.agentauth/
        cp /tmp/*$UID* ~/.agentauth/
   2.e  Run agent as described in the beginning examples





REMOTE COPIES

Following script genearte a bash script stage.sh 
with the xrdcp commands for selected files 
(see AlienToolkit.cxx -  AlienToolkit::MakeCollection(dir, mask))

Example:
gSystem->Load("libXrdClient.so");
gSystem->Load("libNetx.so");
.L $ALICE_ROOT/TPC/macros/testTPC/AlienToolkit.cxx+
//
AlienToolkit toolkit;
toolkit.MakeCollection("/alice/cern.ch/user/m/miranov/","08000031843019.1*AliESDs*")
toolkit.RemoteCopy("/lustre_alpha/alice/TPCdata/cosmics_may2008/",10000000000)
